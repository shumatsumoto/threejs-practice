## 1. 問題タイトル

12 本目：ライトの追加（DirectionalLight）

## 2. 学習目標

この演習を通じて、以下の技術を習得します。

- Three.js における光源（Light）の重要性
- `MeshStandardMaterial` と `MeshBasicMaterial` の違い
- `DirectionalLight`（平行光源）の設置方法

## 3. 新しい概念の解説

**MeshStandardMaterial**
「物理ベースレンダリング（PBR）」に近い計算を行う標準的なマテリアルです。
`MeshBasicMaterial` と異なり、ライト（光源）の影響を受けて陰影がつきます。ライトがないと真っ黒に見えます。

```javascript
// ライトの影響を受けるマテリアル
const material = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
```

**DirectionalLight（平行光源）**
太陽光のように、はるか遠くから降り注ぐ光です。
位置（`position`）は「光の来る方向」を決めるために使われます。

```javascript
// 白色の光、強さ1.0
const light = new THREE.DirectionalLight(0xffffff, 1.0);
light.position.set(5, 5, 5); // 右上から照らす
scene.add(light);
```

## 4. 課題の説明

これまで使っていた `MeshBasicMaterial` は光の影響を受けないため、立体感がありませんでした。
光の影響を受ける `MeshStandardMaterial` に変更し、太陽光のような「平行光源（DirectionalLight）」を追加して、キューブに陰影をつけてください。

## 5. 必須要件

以下の機能を実装してください。

- **マテリアルの変更**:
  `MeshBasicMaterial` を `MeshStandardMaterial` に変更し、色（例：緑）を指定します。
  この時点では画面が真っ黒になることを確認してください。

- **ライトの追加**:
  `THREE.DirectionalLight`（色：白 `0xffffff`、強さ：1）を作成します。
  `light.position.set(5, 5, 5)` で右上から照らす位置に設定し、シーンに追加します。

- **確認**:
  光源を当てたことで、キューブに立体的な陰影が表示されることを確認します。

## 6. ヒント

- **ヒント 1（マテリアルの必須条件）**:
  `MeshStandardMaterial` は物理法則に基づいた素材です。ライトがないと真っ黒になりますが、ライトがあると陰影が美しく表現されます。
- **ヒント 2（DirectionalLightの性質）**:
  太陽光のような「平行光源」です。位置（`position`）は「光がやってくる方向」を決めるために使われます。
  `light.position.set(1, 1, 1)` なら、右手前上空から左奥下に向かって光が差します。
- **ヒント 3（光の強さ）**:
  第二引数の `intensity`（強さ）で明るさを調整できます。`1.0` が標準的ですが、シーンによっては `0.5` や `2.0` に調整します。
- **ヒント 4（AmbientLightの重要性）**:
  平行光源だけだと、光が当たらない裏面は完全に真っ黒（#000000）になります。
  現実世界では反射光があるため、うっすら見えるはずです。これを再現するために `AmbientLight`（環境光）を少し足すのが定石です。
- **ヒント 5（ライトの追加漏れ）**:
  ライトも `scene.add(light)` しないと効果を発揮しません。メッシュと同じ扱いであることを忘れないでください。

## 7. スターターコード

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// --- 変更点: BasicMaterialではなくStandardMaterialを使用 ---
const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);

camera.position.z = 5;

// --- ここでライトを追加してください ---

// --- ここまで ---

function animate() {
  requestAnimationFrame(animate);
  cube.rotation.x += 0.01;
  cube.rotation.y += 0.01;
  renderer.render(scene, camera);
}
animate();
```

## 8. 模範解答

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);

camera.position.z = 5;

// 1. 平行光源（DirectionalLight）の追加
// 色: 白(0xffffff), 強さ: 1
const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(5, 5, 5); // 右上手前から照らす
scene.add(directionalLight);

// 2. 環境光（AmbientLight）の追加（任意）
// 全体をふんわり明るくして、影が真っ黒になるのを防ぐ
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
scene.add(ambientLight);

function animate() {
  requestAnimationFrame(animate);
  cube.rotation.x += 0.01;
  cube.rotation.y += 0.01;
  renderer.render(scene, camera);
}
animate();
```
