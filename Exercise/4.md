## 1. 問題タイトル

4 本目：マテリアルの色を変更

## 2. 学習目標

この演習を通じて、以下の技術を習得します。

- 作成済みのオブジェクトのプロパティへのアクセス方法
- `THREE.Color` クラスによる色の管理
- 動的なプロパティ変更の基礎

## 3. 新しい概念の解説

**Color Class（カラークラス）**
Three.js では色は `THREE.Color` クラスで管理されます。
16進数（`0xff0000`）、文字列（`"red"`）、RGB値などで指定可能です。

```javascript
const color1 = new THREE.Color(0xff0000); // 赤 (Hex)
const color2 = new THREE.Color("blue");   // 青 (String)
```

**Color.set()**
既存の色の値を変更するメソッドです。
`material.color = 0xff0000` と直接代入するのではなく、`material.color.set(0xff0000)` を使うのが一般的です。これにより、内部的な数値の最適化や変換が正しく行われます。

```javascript
// マテリアルの色を赤に変更
material.color.set(0xff0000);
```

## 4. 課題の説明

最初は緑色で作成されたキューブを、JavaScript のコードを使って「後から」赤色に変更して表示してください。
これは、ユーザーの操作やイベントに応じて色を変えるための基礎となります。

## 5. 必須要件

以下の機能を実装してください。

- **初期設定**:
  緑色のキューブを作成してシーンに追加します。

- **動的な色変更**:
  `renderer.render(scene, camera)` を呼び出す直前（またはその手前）で、以下のコードを実行します。
  `cube.material.color.set(0xff0000);`

- **確認**:
  実行結果として、最初から「赤色」のキューブが表示されることを確認します（一瞬で切り替わるため緑は見えません）。

## 6. ヒント

- **ヒント 1（プロパティへのアクセス）**:
  作成したメッシュ変数 `cube` から `material` プロパティにアクセスし、さらにその中の `color` プロパティを操作します。
- **ヒント 2（色の変更メソッド）**:
  `cube.material.color = 0xff0000` と直接代入するのではなく、Three.js の流儀として `cube.material.color.set(0xff0000)` を使います。
- **ヒント 3（タイミング）**:
  マテリアルの変更はレンダリング（`renderer.render`）の前に行う必要があります。レンダリング後に変更しても、次の描画タイミングまで画面には反映されません。
- **ヒント 4（色の指定方法）**:
  `set` メソッドは柔軟で、`set('red')` や `set('#ff0000')`、`setRGB(1, 0, 0)` など様々な形式を受け付けます。
- **ヒント 5（リアクティブ性）**:
  Three.js では、マテリアルのプロパティを変更すると、次回のレンダリング時に自動的に見た目が更新されます（一部の重い処理を除く）。明示的な更新フラグなどは通常不要です。

## 7. スターターコード

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// 緑色のキューブを作成
const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);

camera.position.z = 5;

// --- ここで色を赤に変更してください ---

// --- ここまで ---

renderer.render(scene, camera);
```

## 8. 模範解答

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 }); // 初期は緑
const cube = new THREE.Mesh(geometry, material);
scene.add(cube);

camera.position.z = 5;

// 色の変更
// マテリアルのcolorプロパティのsetメソッドを使用
cube.material.color.set(0xff0000);

renderer.render(scene, camera);
```
