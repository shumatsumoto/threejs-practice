## 1. 問題タイトル

17 本目：WireframeGeometry の作成

## 2. 学習目標

この演習を通じて、以下の技術を習得します。

- `wireframe: true` と `WireframeGeometry` の違い
- `LineSegments` を使った線の描画
- 美しいワイヤーフレーム表現

## 3. 新しい概念の解説

**WireframeGeometry**
`wireframe: true` はポリゴン（三角形）の辺をすべて描画するため、対角線が入ってしまいます。
`WireframeGeometry` は、形状のエッジ（構造線）だけを抽出して美しいワイヤーフレームを作るための専用ジオメトリです。

```javascript
const wireframeGeo = new THREE.WireframeGeometry(geometry);
```

**LineSegments**
点と点を結ぶ「線」を描画するオブジェクトです。`Mesh`（面）とは異なり、線としての太さなどは環境依存で変更できないことが多いですが、軽量で構造表現に向いています。

```javascript
// 線のマテリアル
const lineMat = new THREE.LineBasicMaterial({ color: 0xffffff });
// 線オブジェクトの作成
const line = new THREE.LineSegments(wireframeGeo, lineMat);
scene.add(line);
```

## 4. 課題の説明

マテリアルの `wireframe: true` はポリゴンの三角形をすべて表示しますが、`WireframeGeometry` を使うと、より綺麗な（構造線のみの）ワイヤーフレームを表示できます。
これを使って、スタイリッシュなワイヤーフレームキューブを作成してください。

## 5. 必須要件

以下の機能を実装してください。

- **WireframeGeometryの作成**:
  通常の `BoxGeometry` を作成した後、それを引数にして `const wireframeGeo = new THREE.WireframeGeometry(geometry)` を作成します。

- **LineSegmentsの作成**:
  メッシュ用ではなく線用のマテリアル `THREE.LineBasicMaterial({ color: 0xffffff })` を作成します。
  `new THREE.LineSegments(wireframeGeo, material)` を作成し、シーンに追加します。

- **確認**:
  対角線（ポリゴンの分割線）が含まれない、綺麗な枠線だけのキューブが表示されることを確認します。

## 6. ヒント

- **ヒント 1（構造線の抽出）**:
  `WireframeGeometry` は、入力されたジオメトリから「意味のあるエッジ（角）」だけを抽出して、新しいジオメトリを作ります。
- **ヒント 2（LineSegments）**:
  これは「メッシュ（面）」ではなく「ライン（線）」の集まりです。
  そのため `Mesh` クラスではなく `LineSegments` クラスを使います。
- **ヒント 3（重ね合わせテクニック）**:
  実務では、少し小さめの黒いソリッドなキューブの上に、少し大きめの発光するワイヤーフレームキューブを重ねて、「SFチックなボックス」を作ったりします。
- **ヒント 4（パラメータ不要）**:
  `new THREE.WireframeGeometry(geometry)` のように、既存のジオメトリを渡すだけで自動計算してくれます。簡単です。
- **ヒント 5（線の太さ）**:
  WebGL の仕様上、Windows (DirectX) などの一部環境では線の太さ（linewidth）を `1` 以外に変更できないことがあります。これは Three.js のバグではなく仕様です。

## 7. スターターコード

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BoxGeometry(2, 2, 2);

// --- ここでWireframeGeometryを使って線画を作成してください ---

camera.position.z = 5;

function animate() {
  requestAnimationFrame(animate);
  // 回転させる（変数名は適宜変更）
  // line.rotation.x += 0.01;
  // line.rotation.y += 0.01;
  renderer.render(scene, camera);
}
animate();
```

## 8. 模範解答

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BoxGeometry(2, 2, 2);

// 1. WireframeGeometryの作成
// 通常のジオメトリから、ワイヤーフレーム表示専用のジオメトリを生成
const wireframeGeo = new THREE.WireframeGeometry(geometry);

// 2. ラインマテリアルの作成
const lineMat = new THREE.LineBasicMaterial({ color: 0x00ffff });

// 3. LineSegmentsの作成（Meshではない）
const wireframeCube = new THREE.LineSegments(wireframeGeo, lineMat);
scene.add(wireframeCube);

camera.position.z = 5;

function animate() {
  requestAnimationFrame(animate);

  wireframeCube.rotation.x += 0.01;
  wireframeCube.rotation.y += 0.01;

  renderer.render(scene, camera);
}
animate();
```
