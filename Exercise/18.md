## 1. 問題タイトル

18 本目：TorusGeometry でドーナツ型

## 2. 学習目標

この演習を通じて、以下の技術を習得します。

- 複雑なジオメトリ（Torus: 円環）のパラメータ設定
- `Math.PI` を使った回転制御
- ジオメトリごとの特性の違い

## 3. 新しい概念の解説

**TorusGeometry（円環ジオメトリ）**
ドーナツ型の形状です。
- `radius`: 全体の大きさ（中心からチューブ中心までの距離）
- `tube`: チューブ自体の太さ（半径）
- `radialSegments`: チューブの断面の丸み
- `tubularSegments`: リング全体の丸み
パラメータが多いため、形状を細かく調整できるのが特徴です。

```javascript
// 半径10, 太さ3, 断面分割数16, 円周分割数100
const geometry = new THREE.TorusGeometry(10, 3, 16, 100);
```

## 4. 課題の説明

ドーナツ型（円環）のオブジェクトを作成し、回転させてください。
TorusGeometry はパラメータが多く、形を細かく制御できます。

## 5. 必須要件

以下の機能を実装してください。

- **TorusGeometryの作成**:
  `new THREE.TorusGeometry(10, 3, 16, 100)` を作成します。
  引数は順に `(radius, tube, radialSegments, tubularSegments)` です。

- **マテリアルとメッシュ**:
  `MeshBasicMaterial`（`wireframe: true` 推奨）または `MeshStandardMaterial` を適用し、メッシュを作成します。

- **アニメーション**:
  形状がよく分かるように、X軸とY軸の両方で回転させます。

## 6. ヒント

- **ヒント 1（パラメータの順序）**:
  `(radius, tube, radialSegments, tubularSegments)` の順です。
  「全体の大きさ」「チューブの太さ」「断面の滑らかさ」「輪の滑らかさ」と覚えましょう。
- **ヒント 2（ポリゴン数）**:
  分割数（Segments）を増やすと滑らかになりますが、頂点数が劇的に増えるので注意が必要です。
  `100` くらいあれば十分綺麗に見えます。
- **ヒント 3（Wireframe推奨）**:
  形状が複雑なので、最初は `wireframe: true` で表示して、ポリゴンの分割具合を確認するのがおすすめです。
- **ヒント 4（アーク）**:
  5番目の引数を使うと、`Math.PI`（半円）だけ描画する、といった「欠けたドーナツ」も作れます。
- **ヒント 5（回転）**:
  ドーナツ型は回転させると見た目の変化がわかりやすいので、X軸とY軸両方をゆっくり回すと形状が把握しやすいです。

## 7. スターターコード

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// --- ここでドーナツ型を作成してください ---

camera.position.z = 5;

function animate() {
  requestAnimationFrame(animate);
  // 回転
  renderer.render(scene, camera);
}
animate();
```

## 8. 模範解答

```javascript
import * as THREE from "three";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// 1. TorusGeometryの作成
// 半径1, 太さ0.4, 断面の分割数16, 円周の分割数100
const geometry = new THREE.TorusGeometry(1, 0.4, 16, 100);
const material = new THREE.MeshBasicMaterial({
  color: 0xff6347,
  wireframe: true,
});
const torus = new THREE.Mesh(geometry, material);
scene.add(torus);

camera.position.z = 5;

function animate() {
  requestAnimationFrame(animate);

  torus.rotation.x += 0.01;
  torus.rotation.y += 0.01;

  renderer.render(scene, camera);
}
animate();
```
